%rebase base.tmpl
<dl id="status">
  <h3>Status</h3>
  <dt>Agents</dt>
  <dd>{{len(broker_info.get('agents', []))}}</dd>

  <dt>Running tests</dt>
  <dd>{{len(runs)}}</dd>

  <dt>Stored tests</dt>
  <dd>{{len(inactives)}}</dd>
</dl>

<dl id="active">

<h3>Active Runs</h3>
%if len(runs) > 0:
  %for index, (started, fqn, run_id, info) in enumerate(runs):
  <dt id="run-{{run_id}}">Run nÂº{{index+1}} - {{started}}</dt>
  <dd id="run-{{run_id}}-link">
    <a href="/run/{{run_id}}">{{fqn}}</a>
  </dd>
  %end
%else:
 <span id="norun">
  Nothing is running.
 </span>
%end
</dl>


<dl id="stored">

<h3 id="stored-title">Stored Runs</h3>
  %for index, (started, fqn, run_id, info) in enumerate(inactives):
  <dt id="inactive-{{run_id}}">{{run_id}}</dt>
  <dd id="inactive-{{run_id}}-link"><a href="/run/{{run_id}}">{{started}}: {{fqn}}</a></dd>
  %end
</dl>


<script>
  $(document).ready(function() {
    initStatusSocket("ws://{{wsserver}}:{{wsport}}/status/websocket");
  });
</script>
