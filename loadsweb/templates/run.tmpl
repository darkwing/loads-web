%rebase base.tmpl
%if active:
  <div id="spinner">
  </div>
%end


<p>Testing <strong>{{info['metadata']['fqn']}}</strong></p>

<dl id="summary">
  <h3>Status</h3>

  <dt>Run Id</dt>
  <dd>{{run_id}}</dd>

  <dt>Duration</dt>
  <dd>{{info['counts']['elapsed']}}</dd>

  <dt>Started</dt>
  <dd>{{info['metadata']['started']}}</dd>

  <dt>State</dt>
  <dd>
  %if active:
    Running
  %else:
    Ended
  %end
  </dd>


  <h3>Configuration</h3>

  <dt>Users</dt>
  <dd>{{info['metadata']['users']}}</dd>

  <dt>Hits</dt>
  <dd>{{info['metadata']['hits']}}</dd>

  <dt>Agents</dt>
  <dd>{{info['metadata']['agents']}}</dd>


</dl>


<dl id="results">

 <h3>Results</h3>
 <dt>Tests done</dt>
 <dd>{{info['counts'].get('startTest', 0) - info['counts'].get('stopTest', 0)}}
 </dd>

 <dt>Successes</dt>
 <dd id="count-addSuccess">{{info['counts'].get('addSuccess', 0)}}</dd>
 <dt>Failures</dt>
 <dd id="count-addFailure">{{info['counts'].get('addFailure', 0)}}</dd>

 <dt>Errors</dt>
 <dd id="count-addError">{{info['counts'].get('addError', 0)}}</dd>

 <dt>TCP Hits</dt>
 <dd id="count-add_hit">{{info['counts'].get('add_hit', 0)}}</dd>

 <dt>Opened web sockets</dt>
 <dd id="count-add_hit">{{info['counts'].get('socket_open', 0)}}</dd>
 <dt>Total web sockets</dt>
 <dd id="count-add_hit">{{info['counts'].get('socket_open', 0)}}</dd>

 <dt>Bytes/websockets</dt>
 <dd id="count-add_hit">{{info['counts'].get('socket_message', 0)}}</dd>


%if len(info['custom']) > 0:
 <h3>Custom metrics</h3>
 %for name, value in info['custom'].items():
  <dt>{{name}}</dt>
  <dd id="count-{{name}}">{{value}}</dd>
 %end
</dl>
%end

<div class="dashboard">


<div style="clear:both"></div>

%if active:
<script>
  $(document).ready(function() {
    initSpinner('spinner');
    initSocket("ws://{{wsserver}}:{{wsport}}/run/{{run_id}}/websocket");
  });
</script>
%end
